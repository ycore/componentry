import*as e from"react/jsx-runtime";import*as r from"@heroicons/react/16/solid";import*as a from"@ycore/forge/utils";import*as n from"react";import*as s from"clsx";import*as t from"react-router";import*as l from"../catalyst/index.mjs";let i=(0,n.createContext)(""),o=({navConfigItems:r,navFilters:a,menuClass:n,...s})=>{let{children:o,...d}=s,m=(0,t.useLocation)(),{navbar:b,sidebar:h}=c({navConfigItems:r,navFilters:a});return(0,e.jsx)(i.Provider,{value:m.pathname,children:(0,e.jsx)(l.SidebarLayout,{navbar:b,sidebar:h,className:n,...d,children:o})})},d=({navConfigItems:r,navFilters:a,menuClass:n,...s})=>{let{children:o,...d}=s,m=(0,t.useLocation)(),{navbar:b,sidebar:h}=c({navConfigItems:r,navFilters:a});return(0,e.jsx)(i.Provider,{value:m.pathname,children:(0,e.jsx)(l.StackedLayout,{navbar:b,sidebar:h,className:n,...d,children:o})})},c=({navConfigItems:r,navFilters:s=[]})=>{let t=e=>!e.filter||0===e.filter.length||e.filter.some(e=>s.includes(e)),i=0===s.length?r:r.map(e=>({section:e.section.filter(t).map(e=>e.submenu?{...e,submenu:e.submenu.filter(t)}:e)})).filter(e=>e.section.length>0);return{navbar:(0,e.jsx)(l.Navbar,{children:i.map((r,s)=>{let t=(0,a.toBase)(s);return(0,e.jsxs)(n.Fragment,{children:[1===s&&(0,e.jsx)(l.Navbar.Spacer,{},`space-${t}`),(0,e.jsxs)(l.Navbar.Section,{className:"max-lg:hidden",children:[0!==s&&(0,e.jsx)(l.Navbar.Divider,{},`div-${t}`),r.section.map(r=>(0,e.jsx)(m,{sectionitem:r,type:"navbar"},r.ref))]},`section-${t}`)]},`fmt-${t}`)})}),sidebar:(0,e.jsx)(l.Sidebar,{children:(0,e.jsx)(l.Sidebar.Body,{children:i.map((r,s)=>{let t=(0,a.toBase)(s);return(0,e.jsxs)(n.Fragment,{children:[0!==s&&(0,e.jsx)(l.Sidebar.Divider,{},`div-${t}`),s===i.length-1&&(0,e.jsx)(l.Sidebar.Spacer,{},`space-${t}`),(0,e.jsx)(l.Sidebar.Section,{children:r.section.map((r,a)=>(0,e.jsx)(m,{sectionitem:r,type:"sidebar"},r.ref))},`section-${t}`)]},`fmt-${t}`)})})})}},m=({sectionitem:t,type:o,navkey:d,...c})=>{let m=(0,n.useContext)(i),b=t.submenu?.some(e=>e.href&&m===e.href),h="navbar"===o;return t.submenu?(0,e.jsxs)(l.Dropdown,{children:[(0,e.jsxs)(l.Dropdown.Button,{as:h?l.Navbar.Item:l.Sidebar.Item,className:(0,s.default)(h?"max-lg:hidden":"lg:mb-2.5",b?"rounded-b-none border-b":"border-current"),children:[t.component,"label"in t&&t.label&&(h?(0,e.jsx)(l.Navbar.Label,{children:t.label}):(0,e.jsx)(l.Sidebar.Label,{children:t.label})),h?(0,e.jsx)(r.ChevronDownIcon,{}):(0,e.jsx)(r.ChevronRightIcon,{})]}),(0,e.jsx)(l.Dropdown.Menu,{className:"min-w-80 lg:min-w-64",...c,children:t.submenu.map((r,n)=>(0,e.jsxs)(l.Dropdown.Item,{href:r.href,className:(0,s.default)(r.href&&m===r.href?"rounded-l-none border-l-2":"border-current"),children:[r.component,"label"in r&&r.label&&(0,e.jsx)(l.Dropdown.Label,{children:r.label})]},`drop-${(0,a.toBase)(n)}`))},d)]},`dd-${d}`):h?(0,e.jsxs)(l.Navbar.Item,{href:t.href||"#",current:!!(t.href&&m===t.href),children:[t.component,"label"in t&&t.label&&(0,e.jsx)(l.Navbar.Label,{children:t.label})]},d):(0,e.jsxs)(l.Sidebar.Item,{href:t.href||"#",current:!!(t.href&&m===t.href),children:[t.component,"label"in t&&t.label&&(0,e.jsx)(l.Sidebar.Label,{children:t.label})]},d)};export{c as NavMenuFactory,o as SideMenu,d as StackMenu};