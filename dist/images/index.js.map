{"version":3,"file":"index.js","sources":["../../src/vibrant/components/svg-icon.tsx","../../src/shadcn-ui/components/spinner.tsx","../../src/images/LazyImage.tsx","../../src/images/SpriteIconProvider.tsx","../../src/images/SpriteIcon.tsx"],"sourcesContent":["import { createSpriteIcon } from '@ycore/componentry/images';\nimport type { IconName } from '../@types/lucide-sprites';\n\n/**\n * Pre-configured SpriteIcon component for Lucide icons.\n *\n * Resolves sprite URLs from SpriteIconProvider context using the 'lucide' key.\n * The consuming app must configure the provider in root.tsx with:\n *\n * @example\n * ```tsx\n * import lucideSpriteUrl from '@ycore/componentry/vibrant/assets/lucide-sprites.svg?url';\n * <SpriteIconProvider sprites={{ lucide: lucideSpriteUrl }}>\n * ```\n */\nexport const SvgIcon: React.FC<Omit<React.ComponentProps<'svg'>, 'children'> & { iconId?: IconName }> = createSpriteIcon<IconName>('lucide');\n","import clsx from 'clsx';\nimport React from 'react';\nimport type { IconName } from '../../vibrant/@types/lucide-sprites';\nimport { SvgIcon } from '../../vibrant/components/svg-icon';\n\nfunction Spinner({ className, iconId = 'Loader', ...props }: React.ComponentProps<'svg'> & { iconId?: IconName }): React.JSX.Element | null {\n  return <SvgIcon iconId={iconId} role=\"status\" aria-label=\"Loading\" className={clsx('size-4 animate-spin', className)} {...props} />;\n}\n\nexport { Spinner };\n","import clsx from 'clsx';\nimport React from 'react';\nimport { Await } from 'react-router';\n\nimport { Spinner } from '../shadcn-ui/components/spinner';\nimport type { ImageData, LazyGalleryProps, LazyImageProps } from './@types/LazyImage.types';\n\nexport const imageLoader = async (filenames: Record<string, () => Promise<unknown>>) => {\n  return Object.keys(filenames).map(filePath => filePath.replace(/.*\\/(.*)/, '$1'));\n};\n\nexport const createRemoteImagePromise = (src: string, alt: string, width?: number, height?: number): Promise<ImageData> => {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      resolve({ src, alt, width: width || img.naturalWidth, height: height || img.naturalHeight, loading: 'lazy' });\n    };\n    img.onerror = () => {\n      reject(new Error(`Failed to load image: ${src}`));\n    };\n    img.src = src;\n  });\n};\n\nexport function LazyImage({ image, src, alt, width, height, className, spriteUrl, fallback = spriteUrl ? <Spinner /> : <div className=\"text-slate-500/50\">Loading...</div> }: LazyImageProps): React.JSX.Element {\n  const imagePromise = image || (src ? createRemoteImagePromise(src, alt || '', width, height) : null);\n\n  if (!imagePromise) {\n    return <div className=\"text-slate-500/50\">Error: No image source provided</div>;\n  }\n\n  return (\n    <React.Suspense fallback={fallback}>\n      <TypedAwait<ImageData> resolve={imagePromise} errorElement={spriteUrl ? <Spinner className=\"text-slate-500/50\" /> : <div className=\"text-slate-500/50\">Error loading image</div>}>\n        {(imageData: ImageData) => <ImageElement {...imageData} className={clsx(imageData.className, className)} />}\n      </TypedAwait>\n    </React.Suspense>\n  );\n}\n\nexport function LazyGallery({\n  images,\n  className,\n  imageClass,\n  spriteUrl,\n  fallback = spriteUrl ? <Spinner className=\"h-[180px]\" /> : <div className=\"h-[180px] text-slate-500/50\">Loading...</div>,\n}: LazyGalleryProps): React.JSX.Element {\n  return (\n    <div className={className}>\n      {images.map(imgPromise => (\n        <LazyImage key={imgPromise.toString()} image={imgPromise} className={imageClass} spriteUrl={spriteUrl} fallback={fallback} />\n      ))}\n    </div>\n  );\n}\n\nfunction TypedAwait<T>({ resolve, children, ...props }: { resolve: Promise<T>; children: (data: T) => React.ReactNode; [key: string]: unknown }) {\n  return (\n    <Await resolve={resolve} {...props}>\n      {data => children(data as T)}\n    </Await>\n  );\n}\n\nconst ImageElement: React.FC<ImageData> = ({ src, alt, width, height, className, loading = 'lazy' }) => {\n  return <img src={src} alt={alt} width={width} height={height} className={className} loading={loading} decoding=\"async\" />;\n};\n","import { createContext, useContext } from 'react';\n\n/**\n * Configuration mapping sprite keys to resolved URLs\n */\nexport interface SpriteIconConfig {\n  [key: string]: string;\n}\n\n/**\n * Context for sprite icon configuration\n */\nconst SpriteIconContext = createContext<SpriteIconConfig | null>(null);\n\n/**\n * Hook to retrieve a resolved sprite URL by key from Context.\n *\n * Must be used within a SpriteIconProvider.\n *\n * @example\n * ```tsx\n * const spriteUrl = useSpriteIcon('lucide');\n * <MarkdownPage spriteUrl={spriteUrl} />\n * ```\n */\nexport function useSpriteIcon(spriteKey: string): string {\n  const config = useContext(SpriteIconContext);\n\n  if (!config) {\n    throw new Error('useSpriteIcon must be used within a SpriteIconProvider. Wrap your app with <SpriteIconProvider sprites={{...}}>.');\n  }\n\n  if (!config[spriteKey]) {\n    throw new Error(`Sprite key \"${spriteKey}\" not found in SpriteIconProvider. Available keys: ${Object.keys(config).join(', ')}`);\n  }\n\n  return config[spriteKey];\n}\n\n/**\n * Provider component that makes sprite URLs available to SpriteIcon components\n *\n * Configure at the app level to resolve sprite URLs using your asset resolution strategy.\n *\n * @example\n * ```tsx\n * // app/root.tsx\n * import lucideSpriteUrl from '@ycore/componentry/vibrant/assets/lucide-sprites.svg?url';\n *\n * export default function App() {\n *   return (\n *     <SpriteIconProvider sprites={{ lucide: lucideSpriteUrl }}>\n *       <Outlet />\n *     </SpriteIconProvider>\n *   );\n * }\n * ```\n */\nexport function SpriteIconProvider({ sprites, children }: { sprites: SpriteIconConfig; children: React.ReactNode }): React.JSX.Element {\n  return <SpriteIconContext.Provider value={sprites}>{children}</SpriteIconContext.Provider>;\n}\n","import React from 'react';\nimport type { SpriteIconProps } from './@types/SpriteIcon.types';\nimport { useSpriteIcon } from './SpriteIconProvider';\n\n/**\n * Renders an SVG icon using a sprite sheet.\n */\nexport function SpriteIcon<IconId extends string = string>({ spriteUrl, iconId, ...props }: SpriteIconProps<string, IconId>): React.JSX.Element {\n  return (\n    // biome-ignore lint/a11y/noSvgWithoutTitle: acceptable\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" {...props}>\n      {iconId ? <use href={`${spriteUrl}#${iconId}`} /> : <use href={`${spriteUrl}`} />}\n    </svg>\n  );\n}\n\n/**\n * Creates a pre-configured SpriteIcon component bound to a sprite key from Context or a direct URL.\n */\nexport function createSpriteIcon<IconId extends string>(spriteKey: string, options?: { iconSpriteUrl?: string }) {\n  // If iconSpriteUrl provided, use it directly\n  if (options?.iconSpriteUrl) {\n    const spriteUrl = options.iconSpriteUrl;\n    return function SpriteIconComponent({ iconId, ...props }: Omit<SpriteIconProps<string, IconId>, 'spriteUrl'>): React.JSX.Element {\n      return <SpriteIcon spriteUrl={spriteUrl} iconId={iconId} {...props} />;\n    };\n  }\n\n  // Otherwise use context lookup\n  return function SpriteIconComponent({ iconId, ...props }: Omit<SpriteIconProps<string, IconId>, 'spriteUrl'>): React.JSX.Element {\n    const spriteUrl = useSpriteIcon(spriteKey);\n    return <SpriteIcon spriteUrl={spriteUrl} iconId={iconId} {...props} />;\n  };\n}\n"],"names":["createSpriteIcon"],"mappings":"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"}